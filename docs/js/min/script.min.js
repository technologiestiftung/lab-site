function debounce(e,t,l){var i;return function(){var n=this,s=arguments,a=l&&!i;clearTimeout(i),i=setTimeout(function(){i=null,l||e.apply(n,s)},t),a&&e.apply(n,s)}}function niceBreaks(){d3.selectAll("#project-list li.show").classed("two-break",function(e,t){return t%2==0}).classed("three-break",function(e,t){return t%3==0})}function lightbox(e,t,l){function i(){e.length>1&&(c.classed("inactive",!1),a.classed("inactive",!1),0==l&&c.classed("inactive",!0),l==e.length-1&&a.classed("inactive",!0));var i=new Image;i.onload=function(){s.attr("src",e[l]),t[l].length>0&&d.text(t[l]).style("display","block")},s.attr("src","../../images/transparent.gif"),i.src=e[l]}var n=d3.select("body").append("div").attr("id","lightbox"),s=n.append("div").attr("id","lghtbx-container").append("div").attr("class","outer").append("div").attr("class","middle").append("div").attr("class","inner").append("img").attr("src","../../images/transparent.gif").on("click",function(){n.remove()});if(n.append("div").text("Close / SchlieÃŸen").attr("id","lghtbx-close").on("click",function(){n.remove()}),e.length>1)var a=n.append("a").attr("id","lghtbx-next").on("click",function(){l<e.length-1&&(l++,i())}),c=n.append("a").attr("id","lghtbx-prev").on("click",function(){l>0&&(l--,i())});var d=n.append("a").attr("id","lghtbx-subline").append("span").style("display","none");i()}var embedResize=debounce(function(){window.innerWidth>=768&&d3.select("#nav ul").style("display","block"),d3.selectAll(".embed").each(function(){var e=d3.select(this).node().clientWidth;d3.select(this).select("img,object,video,iframe").each(function(){var t=d3.select(this).attr("width"),l=d3.select(this).attr("height");d3.select(this).style("height",Math.round(l/t*e)+"px")})})},250);d3.select(".embed").size()>=1&&(window.addEventListener("resize",embedResize),embedResize()),d3.selectAll(".gallery li").size()>=1?d3.selectAll(".gallery li").classed("two-break",function(e,t){return t%2==0}).classed("three-break",function(e,t){return t%3==0}):d3.select("#logo").size()>=1&&(logo(d3.select("#logo"),200,20,5,!1,!0,{min:.2,max:2}),niceBreaks(),d3.selectAll("#team-list li").classed("two-break",function(e,t){return t%2==0}).classed("three-break",function(e,t){return t%3==0})),d3.select("#burger").on("click",function(){d3.select(this).classed("active",!d3.select(this).classed("active")),d3.select(this).classed("active")?d3.select("#nav ul").style("display","block"):d3.select("#nav ul").style("display","none")});var galleries=d3.selectAll(".gallery.lghtbx"),links=[],subtitles=[];galleries.each(function(e,t){var l=[],i=[];d3.select(this).selectAll("a").each(function(e,n){var s=d3.select(this);l.push(s.attr("href")),i.push(s.attr("title")),s.on("click",function(){d3.event.preventDefault(),lightbox(links[t],subtitles[t],n)})}),links.push(l),subtitles.push(i)}),d3.selectAll("a.lghtbx").on("click",function(){d3.event.preventDefault();var e=d3.select(this);lightbox([e.attr("href")],[e.attr("title")],0)});