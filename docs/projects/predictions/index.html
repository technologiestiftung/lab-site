<!doctype html>
<html lang="de" itemscope itemtype="http://schema.org/Article">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Datengestützte Prognosen | Ideation &amp; Prototyping Lab</title>
        <meta name="description" content="Gute Vorhersagemodelle, speziell im Bereich des Machine-Learning, stützen sich auf große Datenmengen. Welche Rolle spielen staatliche Open Data Datensätze in diesem Kontext?">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link type="text/plain" rel="author" href="../../humans.txt" />
        <link rel="manifest" href="../../site.webmanifest">
        <link rel="apple-touch-icon" href="../../icons/icon.png">

        <link rel="icon" type="image/png" href="../../icons/favicon-alpha-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="../../icons/favicon-alpha-96x96.png" sizes="96x96">
        <link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico">

        <meta property="fb:app_id" content="487094758334595">
        <meta property="og:url" content="http://lab.technologiestiftung-berlin.de/projects/predictions/index.html">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Datengestützte Prognosen mit offenen Daten">
        <meta property="og:image" content="http://lab.technologiestiftung-berlin.de/projects/predictions/social_media.jpg">
        <meta property="og:description" content="Gute Vorhersagemodelle, speziell im Bereich des Machine-Learning, stützen sich auf große Datenmengen. Welche Rolle spielen staatliche Open Data Datensätze in diesem Kontext?">
        <meta property="og:site_name" content="Ideation &amp; Prototyping Lab">
        <meta property="article:author" content="Sebastian Meier">

        <!-- TWITTER -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@TSBBerlin">
        <meta name="twitter:creator" content="seb_meier">
        <meta name="twitter:url" content="http://lab.technologiestiftung-berlin.de/projects/predictions/index.html">
        <meta name="twitter:title" content="Datengestützte Prognosen mit offenen Daten">
        <meta name="twitter:description" content="Gute Vorhersagemodelle, speziell im Bereich des Machine-Learning, stützen sich auf große Datenmengen. Welche Rolle spielen staatliche Open Data Datensätze in diesem Kontext?">
        <meta name="twitter:image" content="http://lab.technologiestiftung-berlin.de/projects/predictions/social_media.jpg">

        <!-- GOOGLE+/SCHEMA.ORG -->
        <meta itemprop="name" content="Datengestützte Prognosen mit offenen Daten">
        <meta itemprop="description" content="Gute Vorhersagemodelle, speziell im Bereich des Machine-Learning, stützen sich auf große Datenmengen. Welche Rolle spielen staatliche Open Data Datensätze in diesem Kontext?">
        <meta itemprop="image" content="http://lab.technologiestiftung-berlin.de/projects/predictions/social_media.jpg">

        <!-- CANONICAL URL -->
        <link rel="canonical" href="http://lab.technologiestiftung-berlin.de/projects/predictions/index.html">
        <!--<link rel="shortlink" href="tsblab.de/projects/PROJECT">-->

        <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,300i|Kalam:700|Barlow:400,400i,700,700i" rel="stylesheet">
        <meta name="theme-color" content="#1e3791">
        <link href="../../js/prism/prism.css" rel="stylesheet" />
        <link rel="stylesheet" href="../../css/style.css">
        <link rel="stylesheet" href="style.css">
    </head>
    <body class="project">
        <header id="page-head">
            <div class="container">
                <div class="left">
                    <div id="minilogo"><svg viewBox="0 0 254 190" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-1875.000000, -2479.000000)" stroke-linecap="round" stroke-linejoin="round"><g transform="translate(1875.000000, 2478.000000)" fill="#000000" fill-rule="nonzero" stroke-width="7"><g id="logo" transform="translate(128.500000, 100.500000) rotate(4.000000) translate(-128.500000, -100.500000) translate(7.000000, 9.000000)"><path d="M0.316967317,116.55394 L61.6724044,179.221053" stroke="#6ECDF5"></path><path d="M61.6724044,179.221053 L232.546021,4.8771611" stroke="#6ECDF5"></path><path d="M0.316967317,116.55394 L233.101334,4.23466223" stroke="#6ECDF5"></path><path d="M1.51109571,116.469957 L203.326978,154.172387" stroke="#6ECDF5"></path><path d="M233.101334,4.23466223 L203.285227,153.57188" stroke="#6ECDF5"></path><path d="M203.924042,154.130395 L239.525752,116.998677" stroke="#6ECDF5"></path><path d="M239.525752,116.998677 L78.6538161,0.61431818" stroke="#6ECDF5"></path><path d="M16.3120027,125.946118 L78.6538161,0.61431818" stroke="#6ECDF5"></path><path d="M15.6568751,125.27333 L43.1256029,182.634752" stroke="#E60433"></path><path d="M43.1256029,182.634752 L200.909747,6.01962679" stroke="#E60433"></path><path d="M15.6568751,125.27333 L200.909747,6.01962679" stroke="#E60433"></path><path d="M15.6568751,125.27333 L221.975051,144.339786" stroke="#E60433"></path><path d="M200.909747,6.01962679 L221.975051,144.339786" stroke="#E60433"></path><path d="M221.975051,144.339786 L242.948866,114.17657" stroke="#E60433"></path><path d="M242.948866,114.17657 L73.0003868,18.307288" stroke="#E60433"></path><path d="M15.6568751,125.27333 L73.0003868,18.307288" stroke="#E60433"></path></g></g></g></svg></div>
                    <span>
                        <a class="lab-logo" href="http://lab.technologiestiftung-berlin.de">Ideation&nbsp;&amp; Prototyping&nbsp;Lab</a><br />
                        <a href="http://www.technologiestiftung-berlin.de">Technologiestiftung Berlin</a>
                    </span>
                </div>
                <div class="right">
                    <nav id="page-nav">
                        <ul>
                            <li><a href="http://lab.technologiestiftung-berlin.de">Zurück zum Lab</a>&nbsp;<span class="arrow">&#8614;</span></li>
                            <li class="lang"><a href="http://lab.technologiestiftung-berlin.de/projects/predictions/index_en.html">English</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <main>
            <div id="title">
                <div class="container">
                    <span class="button tag">Data Science</span>
                    <h1>Datengestützte Prognosen mit offenen Daten</h1>
                    <span class="title-subline">Sebastian Meier (<a href="https://twitter.com/seb_meier">@seb_meier</a>) | 10/2017</span>
                </div>
            </div>

            <!-- Start editing here -->

            <div class="container p-bottom">
                <p class="copy">
                    Prognosen die auf historischen Daten basieren sind ein wichtiges Instrument für Forschung, Verwaltung und Industrie. Speziell im wachsenden Feld des maschinellen Lernens, spielen historische Daten zum Trainieren von Algorithmen eine zentrale Rolle. Offene Daten (z.B. der Verwaltung) können in diesem Kontext eine große Bereicherung für traditionelle Datenquellen bieten. So lassen sich zum Beispiel, basierend auf den offenen Daten zur Demographie der Stadt Berlin (Download-Link siehe unten), Vorhersagen über das zukünftige Wachstum der Bevölkerung machen. Im unten ausgeführten Beispiel haben wir uns auf die Zielgruppe der Kindergartenkinder konzentriert um diese für die Vorhersage möglicher Engpässe von Kita-Plätzen zu nutzen. Unter Einbezug noch weiterer Datensätze, die einen Einfluss auf die Veränderung des Bevölkerungswachstums haben, könnte diese Prognose noch wesentlich verbessert werden.
                </p>
                <blockquote class="center"><p>Nachhaltige Archivierung von historischen Daten.</p></blockquote>
                <p class="copy">
                    Um die im Rahmen von Open Data Initiativen zur Verfügung gestellten Daten für solche Zwecke nutzbar zu machen gilt es einige Punkte in Hinsicht auf die Archivierung und Verfügbarmachung von Daten zu beachten. Zum einen ist es elementar überhaupt historische Daten zu archivieren und dauerhaft zugänglich zu machen. Darüber hinaus ist es aber noch wichtiger diese nachhaltigen Systematiken zu unterwerfen. Verändern sich zum Beispiel statistiche Einzugsgebiete muss dies transparent dokumentiert werden.
                <p>
            </div>

            <div class="special-section">
              <div id="trends">
                <div class="col" id="trend-1">
                  <div class="top"></div>
                  <div class="mid">
                    <h2>Kita-Kinder pro Bezirk</h2>
                    <div class="inner"></div>
                  </div>
                  <div class="bottom"></div>
                </div>
                <div class="col" id="trend-2">
                  <div class="top"></div>
                  <div class="mid">
                    <h2></h2>
                    <div class="inner"></div>
                  </div>
                  <div class="bottom"></div>
                </div>
                <div class="col no-bg" id="trend-3">
                  <div class="top"></div>
                  <div class="mid">
                    <h2></h2>
                    <div class="inner"></div>
                    <div id="trend-info">
                      <p class="interaction-info">
                        <img src="./images/touch@2x.png" /> Fahren Sie mit der Maus über die Bezirke um mehr über die Entwicklung der jungen Einwohner*innen zu erfahren.<br />Klicken Sie auf einen <span class="trend-type">Bezirk</span> für mehr Details.
                      </p>
                      <p class="prediction-info">
                        <span class="color-block blue"></span> Der blau hervorgehobene Bereich ist eine statistisch* berechnete Prognose für 2017.
                      </p>
                    </div>
                  </div>
                  <div class="bottom"></div>
                </div>
              </div>
              <hr class="clear" />
            </div>

            <div class="container p-top">
                <ul class="download-list">
                    <li>
                        <a href="/data/EWR.zip">
                            <span class="download-icon"></span>
                            <span class="download-title">Einwohnerdaten nach Alter von 2001 bis 2016.</span><br />
                            <span class="download-subtitle">ZIP, 0,6 MB - CCBY<br />Amt für Statistik Berlin-Brandenburg</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="container p-bottom p-top">
                <h2>*statistische Vorhersage</h2>
                <p class="copy">Für die exemplarische Veranschaulichung der Vorhersage der Bevölkerungsentwicklung in den Berliner Bezirken wurde eine relativ einfache Form der Vorhersage genutzt: eine gewichtete lineare Regression. Aktuellere Entwicklung bekommen dabei mehr Gewicht als ältere Veränderungen. Der Code für die Prognose und die Visualisierung können unter GitHub eingesehen werden.</p>
            </div>

            <div class="container center">
                <a id="github" href="https://github.com/technologiestiftung/population-prediction">
                    <img src="../../images/github.svg" alt="Project on Github" />
                    <span class="github-title">technologiestiftung/population-prediction</span><br />
                    <span class="github-subline">Projekt auf GitHub</span>
                    <hr class="clear" />
                </a>
            </div>

            <div id="author" class="container small p-top p-d-bottom">
                <img src="../../images/team/author_sebastian_meier.png" alt="Sebastian Meier" />
                <h3>Über den Autor</h3>
                <h2>Sebastian Meier</h2>
                <p>Sebastian Meier ist Data Scientist bei der Technologiestiftung Berlin. Er studierte Kommunikations- und Interface-Design und schließt aktuell seinen Doktor im Bereich der Geoinformatik an der Uni Potsdam ab. Der Fokus von Sebastians Arbeit liegt auf der Analyse und Visualisierung räumlicher Daten, sowie menschzentrierter Perspektiven bei der Entwicklung von Mensch-Maschine-Schnittstellen.<br /><br /><a href="mailto:meier@technologiestiftung-berlin.de">meier@technologiestiftung-berlin.de</a></p>
                <hr class="clear" />
            </div>

            <!-- Stop editing here -->

        </main>
        <footer id="contact">
            <div id="footer">
                <div class="container">
                    <a href="http://www.technologiestiftung-berlin.de"><img src="../../images/tsb-logo.png" alt="Technologiestiftung Berlin" /></a>
                    <div class="contact-meta">
                        Grunewaldstraße 61-62<br />
                        10825 Berlin<br />
                        +49 30 209 69 99-0<br />
                        <a href="mailto:info@technologiestiftung-berlin.de">info@technologiestiftung-berlin.de</a>
                    </div>
                    <div class="contact-social">
                        <a href="https://twitter.com/tsbberlin"><img src="../../images/twitter.png" alt="Twitter"></a>
                        <a href="https://www.facebook.com/Technologiestiftung/"><img src="../../images/facebook.png" alt="Facebook"></a>
                    </div>
                </div>
            </div>
            <div id="end">
                <div class="container">
                    <div class="left">© Technologiestiftung Berlin 2017</div>
                    <div class="right">
                        <a href="https://www.technologiestiftung-berlin.de/de/stiftung/kontakt-anfahrt/">Kontakt</a>
                        &nbsp;|&nbsp;
                        <a href="https://www.technologiestiftung-berlin.de/de/impressum">Impressum</a>
                        &nbsp;|&nbsp;
                        <a href="https://www.technologiestiftung-berlin.de/de/datenschutz/">Datenschutz</a>
                    </div>
                </div>
            </div>
        </footer>
        <script src="../../js/min/d3.v4.min.js"></script>
        <script src="../../js/prism/prism.js"></script>
        <script type="text/javascript" src="../../js/min/logo.min.js"></script>
        <script type="text/javascript" src="../../js/min/script.min.js"></script>
        <!-- Add your custom JS files here and place them directly in your project folder -->
        <script type="text/javascript">
            /*
                Init Custom Code hier
            */

            var vis = {};

            var trend = (function (container, _level, _dict, _label){

              container.selectAll('*').remove();

              if(_level>1){
                d3.select(container.node().parentNode).selectAll('h2').text(_label);
              }

              var module = {},
                  level = _level,
                  padding = 60,
                  el_margin = 10,
                  width = container.node().getBoundingClientRect().width-5,
                  el_height = 50, els = [],
                  dict = _dict, csv = null, csv_keys = {},
                  svg = container.append('svg').attr('width',width),
                  years = [2001,2016,2017];

              module.draw = function(){
                svg.selectAll('*').remove();

                var root_count = 0;
                for(var key in dict){
                  root_count++;
                }

                svg.attr('height', root_count*(el_height+el_margin)+50+3);

                var x = d3.scaleLinear().domain([years[0],years[2]]).range([0,width-padding]);
                var max = 0;
                for(var i in dict){
                  max = d3.max([max, d3.max(dict[i].sum)]);
                }
                var y = d3.scaleLinear().range([el_height,0]).domain([0,max]);
                var xAxisBottom = d3.axisBottom().scale(x).tickFormat(function(d){ return "'"+(((d-2000)<10)?'0':'')+(d-2000); }).ticks(10);
                var xAxisTop = d3.axisTop().scale(x).tickFormat(function(d){ return "'"+(((d-2000)<10)?'0':'')+(d-2000); }).ticks(10);
                var yAxis = d3.axisLeft().scale(y).tickFormat(d3.format("")).ticks(3);
                var line = d3.line()
                  .x(function(d,i){return x(years[0]+i);})
                  .y(function(d){ return y(d);});

                var ic = 0;
                for(var i in dict){
                  var g = svg.append('g')
                    .attr('class','visgroup')
                    .attr('transform','translate('+(padding-2)+','+ (ic*(el_height+el_margin)+35)+')');

                  g.append('rect')
                    .attr('width',x(years[1]))
                    .attr('height', el_height)
                    .attr('class', 'bg-normal');

                  g.append('rect')
                    .attr('width',(x(years[0]+1)))
                    .attr('transform','translate('+x(years[1])+',0)')
                    .attr('height', el_height)
                    .attr('class', 'bg-predict');            

                  g.selectAll('line').data(new Array(5)).enter().append('line')
                    .attr('x1', 0)
                    .attr('x2', x(years[2]))
                    .attr('class', 'ylines')
                    .style('stroke', 'rgba(0,0,0,0.1)')
                    .attr('y1', function(d,i){ return i*10; })
                    .attr('y2', function(d,i){ return i*10; });

                  g.append('text')
                    .attr('dx',5)
                    .attr('dy',(y(dict[i].sum[0])>35)?15:45)
                    .attr('class', 'label')
                    .text(dict[i].n);

                  g.append('path')
                    .attr('class', 'trend')
                    .attr('d', line(dict[i].sum));

                  var tooltip = g.append('g')
                    .attr('class', 'tooltip')
                    .style('display', 'none');

                  tooltip.append('line')
                    .attr('x1', 0)
                    .attr('x2', 0)
                    .attr('y1', 0)
                    .attr('y2', el_height);

                  tooltip.append('rect')
                    .attr('x', -18)
                    .attr('y', el_height/2-9)
                    .attr('width', 36)
                    .attr('height', 10)
                    .style('fill','#000')
                    .style('stroke-linejoin','round')
                    .style('stroke-width',8)
                    .style('stroke','#000');

                  tooltip.append('text')
                    .datum(dict[i].sum)
                    .attr('class','label')
                    .attr('text-anchor','middle')
                    .attr('dy', el_height/2)
                    .style('fill','#fff');

                  g.append('g')
                    .attr('class', 'axis')
                    .style('display', (ic!=0)?'none':'block')
                    .attr('transform','translate('+(-9)+','+0+')')
                    .call(yAxis);

                  g.append('rect')
                    .datum(dict[i])
                    .attr('width',(x(years[2])))
                    .attr('height', el_height)
                    .attr('class', 'bg-overlay')
                    .style('fill','transparent')
                    .on('mouseenter', function(d){
                      svg.selectAll('.axis').style('display','none');
                      svg.selectAll('path.trend').style('stroke-width',1);
                      var group = d3.select(this.parentNode);
                        group.select('.axis').style('display','block');
                        group.select('path.trend').style('stroke-width','3');
                    })
                    .on('mousemove', function(){
                      var year = Math.round(x.invert(d3.mouse(this)[0]));

                      var tooltip = svg.selectAll('.tooltip')
                        .style('display','block')
                        .attr('transform','translate('+ x(year) +',0)');

                      tooltip.select('.label')
                        .attr('dx', ((year == years[2])?-19:((year == years[0])?19:0)))
                        .text(function(d){
                          return Math.round(d[year-years[0]]);
                        });

                      tooltip.select('rect')
                        .attr('x', ((year == years[2])?-38:((year == years[0])?2:-18)));

                    })
                    .on('mouseleave', function(d){
                      svg.selectAll('.tooltip').style('display','none');
                      svg.selectAll('path.trend').style('stroke-width',1);
                    })
                    .on('click', function(d){
                      if(level<3){
                        if(level == 1){
                          d3.select('#trend-3 h2').text('');
                          d3.select('#trend-3 svg').remove();
                          d3.select("#trend-3"+(level+1)+' .inner').style('display','none');
                        }
                        svg.selectAll('.visgroup').classed('active',false);
                        d3.select(this.parentNode).classed('active',true);
                        d3.select("#trend-"+(level+1)).style('display','block');
                        vis['trend_'+(level+1)] = trend(d3.select("#trend-"+(level+1)+" .inner"), (level+1), d.c, d.n);
                      }
                    });

                  ic++;
                }

                svg.append('g')
                  .attr('transform','translate('+(padding-2)+','+23+')')
                  .call(xAxisTop);

                svg.append('g')
                  .attr('transform','translate('+(padding-2)+','+(ic*(el_height+el_margin)+35)+')')
                  .call(xAxisBottom);
              }

              function processDict(dict){
                for(var key in dict){
                  dict[key]['sum'] = [];

                  for(var i = years[0]; i<=years[2]; i++){
                    dict[key].sum.push(+csv[csv_keys[dict[key].fid]][i]);
                  }

                  processDict(dict[key].c);
                }
              }

              module.update = function(){
                width = container.node().getBoundingClientRect().width-5;
                svg.attr('width',width);
                module.draw();
              };

              if(!dict){
                d3.json('./data/lor_dict.json', function(err, data){
                  if(err){console.log(err);}

                  dict = data;

                  d3.csv('./data/EWR.min.csv', function(err, data){
                    if(err){console.log(err);}

                    csv = data;
                    csv.forEach(function(c,ci){
                      csv_keys[c.fid] = ci;
                      csv_keys[c.id] = ci;
                    });

                    processDict(dict);

                    module.draw();

                  });
                });
              }else{
                module.draw();
              }

              return module;
            });

        var trendVis = trend(d3.select("#trend-1 .inner"),1,false,false);

        d3.select(window).on('resize', debounce(function(){
          trendVis.update();
          for(var v in vis){
            vis[v].update();
          }
        }));

        </script>
    </body>
</html>